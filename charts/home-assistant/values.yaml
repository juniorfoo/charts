# Default values for home-assistant.
# Inspiration from:
# - https://blog.warrenamphlett.co.uk/homelab/home-assistant-in-kubernetes
# - https://drpump.github.io/home-assistant-k3s/
# - https://balagetech.com/running-home-assistant-on-kubernetes/
# - https://github.com/abalage/home-assistant-k8s/blob/main/base/deployment.yml

affinity: {}

# This is to override the chart full name.
fullnameOverride: ""

# This block is for setting up the ingress.
# More info: https://kubernetes.io/docs/concepts/services-networking/ingress/
ingress:
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  className: ""
  enabled: true
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# This sets the container image.
# More info: https://kubernetes.io/docs/concepts/containers/images/
image:
  # This sets the pull policy for images.
  pullPolicy: IfNotPresent
  repository: ghcr.io/home-assistant/home-assistant
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

# This is for the secrets for pulling an image from a private repository.
# More info: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
imagePullSecrets: []

# This is to setup the liveness probes.
# More info: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/
livenessProbe:
  httpGet:
    path: /
    port: http
  failureThreshold: 10
  initialDelaySeconds: 60
  periodSeconds: 5
  timeoutSeconds: 3

# This is to override the chart name.
nameOverride: ""

nodeSelector: {}

# Storage configuration
# ref: https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes
persistence:
  # Persistent Volume Storage Class
  # If defined, storageClassName: <storageClass>
  # If set to "-", storageClassName: "", which disables dynamic provisioning
  # If undefined (the default) or set to null, no storageClassName spec is set choosing the
  # default provisioner.
  # storageClass: "longhorn"
  # storageClass: "-"
  accessModes:
    - ReadWriteOnce
  selector: {}
  size: 1Gi

# This is for setting Kubernetes Annotations to a Pod.
# More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/
podAnnotations: {}

# This is for setting Kubernetes Labels to a Pod.
# More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/
podLabels: {}

podSecurityContext: {}
  # fsGroup: 2000

# This is for setting up a service.
# More info: https://kubernetes.io/docs/concepts/services-networking/service/
service:
  # IP address to use
  # - Empty means that an IP address will be assigned from the pool
  # - None means that an IP will not be assigned    
  clusterIP: ""
  # List of IP addresses at which the Ignition service is available
  # Ref: https://kubernetes.io/docs/user-guide/services/#external-ips
  externalIps: []
  # Denotes if this Service desires to route external traffic to node-local or cluster-wide 
  # endpoints
  externalTrafficPolicy: Cluster
  # Loadbalancer IP
  # Only use if service.type is "LoadBalancer"
  loadBalancerIP: ""
  loadBalancerSourceRanges: []
  # This sets the ports.
  # More info: https://kubernetes.io/docs/concepts/services-networking/service/#field-spec-ports
  port: 8123
  # This sets the service type.
  # More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types
  type: LoadBalancer

# This section builds out the service account.
# More info: https://kubernetes.io/docs/concepts/security/service-accounts/
serviceAccount:
  # Annotations to add to the service account
  annotations: {}
  # Automatically mount a ServiceAccount's API credentials?
  automount: true
  # Specifies whether a service account should be created
  create: true
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# This is to setup the readiness probes.
# More info: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/
readinessProbe:
  httpGet:
    path: /
    port: http
  failureThreshold: 3
  initialDelaySeconds: 30
  periodSeconds: 5
  timeoutSeconds: 1

# This will set the replicaset count.
# More info: https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/
replicaCount: 1

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

tolerations: []

# Timezone that Home Assistant should run in
timezone: "UTC"

# Additional volumeMounts on the home assistant pod
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

# Additional volumes on the home assistant pod
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false
